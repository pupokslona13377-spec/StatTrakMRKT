<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Massage SuperApp</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
margin:0;
font-family:'Inter',sans-serif;
background:radial-gradient(circle at top,#111,#050505);
color:white;
overflow-x:hidden;
}

header{
position:sticky;
top:0;
backdrop-filter:blur(20px);
background:rgba(0,0,0,.55);
padding:18px;
font-weight:800;
text-align:center;
border-bottom:1px solid rgba(255,255,255,.06);
z-index:999;
}

.container{
padding:18px;
padding-bottom:110px;
animation:fade .35s ease;
}

@keyframes fade{
from{opacity:0;transform:translateY(10px)}
to{opacity:1}
}

.card{
background:linear-gradient(145deg,#101014,#18181f);
border-radius:24px;
padding:18px;
margin-bottom:18px;
box-shadow:0 25px 70px rgba(0,0,0,.7);
transition:.25s;
}

.card:hover{transform:translateY(-4px)}

.hero{
font-size:32px;
font-weight:800;
margin-bottom:6px;
}

.sub{opacity:.7;margin-bottom:18px}

.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
gap:16px;
}

.master img{
width:100%;
height:210px;
object-fit:cover;
border-radius:18px;
}

.price{opacity:.7;margin:6px 0}

button{
width:100%;
padding:14px;
border-radius:14px;
border:none;
font-weight:700;
cursor:pointer;
background:linear-gradient(135deg,#7c8bff,#6a5cff);
color:white;
transition:.25s;
}

button:hover{
transform:translateY(-2px);
box-shadow:0 10px 30px rgba(120,90,255,.4);
}

input,select{
width:100%;
padding:13px;
border-radius:12px;
border:none;
background:#1c1c24;
color:white;
margin-top:10px;
}

.tabs{
position:fixed;
bottom:0;
left:0;
right:0;
height:82px;
background:#0c0c11;
display:flex;
border-top:1px solid rgba(255,255,255,.05);
}

.tab{
flex:1;
display:flex;
align-items:center;
justify-content:center;
font-weight:600;
cursor:pointer;
color:#888;
}

.tab.active{color:white;background:#15151d}

.hidden{display:none}

.order{
background:#14141a;
padding:14px;
border-radius:14px;
margin-bottom:10px;
}

.balance{
font-size:34px;
font-weight:800;
}

.tag{
background:#23232c;
padding:6px 10px;
border-radius:999px;
font-size:12px;
margin-left:6px;
}

.row{display:flex;gap:8px}

.success{
background:#1f3d2b;
padding:10px;
border-radius:12px;
margin-top:10px;
text-align:center;
}

.calendarSlot{
padding:10px;
border-radius:10px;
background:#1b1b22;
cursor:pointer;
text-align:center;
}

.calendarSlot.active{
background:#6a5cff;
}

</style>
</head>
<body>

<header>üíé Massage SuperApp</header>

<!-- HOME -->
<div class="container" id="home">
<div class="hero">–ü—Ä–µ–º–∏—É–º –º–∞—Å—Å–∞–∂</div>
<div class="sub">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞ 60 —Å–µ–∫—É–Ω–¥</div>

<div class="card">
–ë–∞–ª–∞–Ω—Å
<div class="balance"><span id="balance">0</span> ‚ÇΩ</div>
<button onclick="switchTab('wallet',tabs[3])">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
</div>

<div class="grid" id="masters"></div>
</div>

<!-- MASTER PAGE -->
<div class="container hidden" id="masterPage">
<button onclick="switchTab('home',tabs[0])">‚Üê –ù–∞–∑–∞–¥</button>

<div class="card" id="masterCard"></div>

<div class="card">
<h3>–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</h3>
<div class="grid" id="slots"></div>
</div>

<button id="confirmBooking">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
</div>

<!-- WALLET -->
<div class="container hidden" id="wallet">
<div class="card">
<h3>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h3>
<select id="payment">
<option value="sbp">–°–ë–ü</option>
<option value="crypto">Crypto</option>
<option value="card">–ö–∞—Ä—Ç–∞</option>
</select>

<input placeholder="–°—É–º–º–∞" id="amount">
<button onclick="fakePay()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å (—Ç–µ—Å—Ç)</button>
<div id="payMsg"></div>
</div>
</div>

<!-- BOOKINGS -->
<div class="container hidden" id="bookings">
<h3>–ê–∫—Ç–∏–≤–Ω—ã–µ</h3>
<div id="active"></div>
<h3>–ò—Å—Ç–æ—Ä–∏—è</h3>
<div id="history"></div>
</div>

<!-- PROFILE -->
<div class="container hidden" id="profile">
<div class="card">
<h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
ID: <span id="uid"></span><br><br>
–ó–∞–ø–∏—Å–µ–π: <span id="count"></span>

<button onclick="resetApp()" style="background:#ff5c5c">–°–±—Ä–æ—Å</button>
</div>
</div>

<!-- ADMIN -->
<div class="container hidden" id="admin">
<div class="card">
<h3>Admin panel (demo)</h3>
<button onclick="seedMoney()">–ù–∞—á–∏—Å–ª–∏—Ç—å –≤—Å–µ–º +5000</button>
</div>
</div>

<!-- TABS -->
<div class="tabs">
<div class="tab active" onclick="switchTab('home',this)">–ì–ª–∞–≤–Ω–∞—è</div>
<div class="tab" onclick="switchTab('bookings',this)">–ó–∞–ø–∏—Å–∏</div>
<div class="tab" onclick="switchTab('profile',this)">–ü—Ä–æ—Ñ–∏–ª—å</div>
<div class="tab" onclick="switchTab('wallet',this)">–ö–æ—à–µ–ª–µ–∫</div>
<div class="tab" onclick="switchTab('admin',this)">Admin</div>
</div>

<script>
////////////////////////////////////////////////////////////
// STATE
////////////////////////////////////////////////////////////

const store={
get:(k,d)=>JSON.parse(localStorage.getItem(k))??d,
set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))
}

let balance=store.get('balance',0)
let active=store.get('active',[])
let history=store.get('history',[])
let uid=store.get('uid',crypto.randomUUID())
store.set('uid',uid)

let selectedMaster=null
let selectedSlot=null

const tabs=document.querySelectorAll('.tab')

////////////////////////////////////////////////////////////
// DATA
////////////////////////////////////////////////////////////

const masters=[
{name:'–ê–Ω–∞—Å—Ç–∞—Å–∏—è',price:2500,img:'https://images.unsplash.com/photo-1594824476967-48c8b964273f',rating:4.9},
{name:'–ü–æ–ª–∏–Ω–∞',price:2300,img:'https://images.unsplash.com/photo-1544005313-94ddf0286df2',rating:4.8},
{name:'–í–∏–∫—Ç–æ—Ä–∏—è',price:2800,img:'https://images.unsplash.com/photo-1554151228-14d9def656e4',rating:5.0},
{name:'–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞',price:2600,img:'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e',rating:4.7}
]

const slots=['10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00','18:00']

////////////////////////////////////////////////////////////
// RENDER
////////////////////////////////////////////////////////////

function renderBalance(){
document.getElementById('balance').innerText=balance
}

function renderMasters(){
const el=document.getElementById('masters')
el.innerHTML=''

masters.forEach(m=>{
const div=document.createElement('div')
div.className='card master'

div.innerHTML=`
<img src="${m.img}">
<b>${m.name}</b>
<div class='price'>${m.price} ‚ÇΩ / —á–∞—Å</div>
‚≠ê ${m.rating}
<button onclick='openMaster("${m.name}")'>–í—ã–±—Ä–∞—Ç—å</button>
`

el.appendChild(div)
})
}

function openMaster(name){
selectedMaster=masters.find(m=>m.name===name)

const card=document.getElementById('masterCard')
card.innerHTML=`
<img src="${selectedMaster.img}" style="width:100%;border-radius:18px;margin-bottom:10px">
<h2>${selectedMaster.name}</h2>
${selectedMaster.price} ‚ÇΩ / —á–∞—Å
<span class='tag'>‚≠ê ${selectedMaster.rating}</span>
`

renderSlots()
switchTab('masterPage',tabs[0])
}

function renderSlots(){
const el=document.getElementById('slots')
el.innerHTML=''

slots.forEach(s=>{
const d=document.createElement('div')
d.className='calendarSlot'
d.innerText=s

d.onclick=()=>{
document.querySelectorAll('.calendarSlot').forEach(x=>x.classList.remove('active'))
d.classList.add('active')
selectedSlot=s
}

el.appendChild(d)
})
}

function renderOrders(){
const a=document.getElementById('active')
const h=document.getElementById('history')

a.innerHTML=''
h.innerHTML=''

active.forEach((o,i)=>{
const d=document.createElement('div')
d.className='order'
d.innerHTML=`${o.master} ‚Äî ${o.slot}<br>${o.price} ‚ÇΩ
<button onclick="finish(${i})">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>`
a.appendChild(d)
})

history.forEach(o=>{
const d=document.createElement('div')
d.className='order'
d.innerHTML=`${o.master} ‚Äî ${o.slot}<br>${o.price} ‚ÇΩ`
h.appendChild(d)
})

document.getElementById('count').innerText=active.length+history.length
}

////////////////////////////////////////////////////////////
// BOOK
////////////////////////////////////////////////////////////

document.getElementById('confirmBooking').onclick=()=>{
if(!selectedMaster||!selectedSlot)return alert('–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è')
if(balance<selectedMaster.price)return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤')

balance-=selectedMaster.price
store.set('balance',balance)

active.push({
master:selectedMaster.name,
slot:selectedSlot,
price:selectedMaster.price
})
store.set('active',active)

renderBalance()
renderOrders()

switchTab('bookings',tabs[1])
}

function finish(i){
history.push(active[i])
active.splice(i,1)
store.set('active',active)
store.set('history',history)
renderOrders()
}

////////////////////////////////////////////////////////////
// PAY
////////////////////////////////////////////////////////////

function fakePay(){
balance+=10000
store.set('balance',balance)
renderBalance()

document.getElementById('payMsg').innerHTML='<div class="success">+10 000 ‚ÇΩ (—Ç–µ—Å—Ç)</div>'
}

function seedMoney(){
balance+=5000
store.set('balance',balance)
renderBalance()
}

////////////////////////////////////////////////////////////
// NAV
////////////////////////////////////////////////////////////

function switchTab(id,el){
document.querySelectorAll('.container').forEach(c=>c.classList.add('hidden'))
document.getElementById(id).classList.remove('hidden')

tabs.forEach(t=>t.classList.remove('active'))
el.classList.add('active')
}

////////////////////////////////////////////////////////////
// RESET
////////////////////////////////////////////////////////////

function resetApp(){
if(!confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ?'))return
localStorage.clear()
location.reload()
}

////////////////////////////////////////////////////////////
// INIT
////////////////////////////////////////////////////////////

renderBalance()
renderMasters()
renderOrders()
document.getElementById('uid').innerText=uid

</script>
</body>
</html>
