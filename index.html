<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>STATTRAK MARKET PRO | TITANIUM EDITION</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* ============================================================
           1. –°–ò–°–¢–ï–ú–ê –î–ò–ó–ê–ô–ù–ê (VARIABLES & RESET)
           ============================================================
        */
        :root {
            --accent: #00D2FF;
            --accent-dark: #00A3C7;
            --ton-blue: #0088CC;
            --bg-main: #0F172A;
            --bg-darker: #020617;
            --card-bg: #1E293B;
            --text-white: #F8FAFC;
            --text-gray: #94A3B8;
            --border: rgba(255, 255, 255, 0.08);
            --glass: rgba(255, 255, 255, 0.05);
            --rarity-rare: #4b69ff;
            --rarity-ancient: #eb4b4b;
            --shadow-glow: 0 0 15px rgba(0, 210, 255, 0.3);
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'SF Pro Display', -apple-system, system-ui, sans-serif;
        }

        body {
            background-color: var(--bg-main);
            color: var(--text-white);
            overflow-x: hidden;
            padding-bottom: 120px; /* –û—Ç—Å—Ç—É–ø –ø–æ–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏—é */
            user-select: none;
            -webkit-user-select: none;
        }

        /* ============================================================
           2. –ê–ù–ò–ú–ê–¶–ò–ò
           ============================================================
        */
        @keyframes pulse-dev {
            0% { opacity: 0.6; transform: scale(1); filter: drop-shadow(0 0 0px var(--accent)); }
            50% { opacity: 1; transform: scale(1.05); filter: drop-shadow(0 0 10px var(--accent)); }
            100% { opacity: 0.6; transform: scale(1); filter: drop-shadow(0 0 0px var(--accent)); }
        }

        @keyframes slide-up {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; } to { opacity: 1; }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ============================================================
           3. –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò–ù–¢–ï–†–§–ï–ô–°–ê
           ============================================================
        */

        /* –ü—Ä–µ–ª–æ–∞–¥–µ—Ä */
        #loading-screen {
            position: fixed; inset: 0; background: var(--bg-darker);
            z-index: 9999; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }
        .loader-ring {
            width: 50px; height: 50px; border: 3px solid var(--glass);
            border-top: 3px solid var(--accent); border-radius: 50%;
            animation: spin 1s linear infinite; margin-bottom: 20px;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        #toast-container {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            z-index: 10000; width: 90%; pointer-events: none;
        }
        .toast {
            background: rgba(30, 41, 59, 0.9); border: 1px solid var(--accent);
            backdrop-filter: blur(10px); color: white; padding: 15px;
            border-radius: 15px; margin-bottom: 10px; font-weight: 700;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); animation: slide-up 0.3s ease;
            display: flex; align-items: center; gap: 10px;
        }

        /* –®–∞–ø–∫–∞ */
        header {
            padding: 20px; position: sticky; top: 0; z-index: 1000;
            background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--border);
        }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .logo { font-size: 24px; font-weight: 900; letter-spacing: -1px; }
        .logo span { color: var(--accent); }
        .user-status {
            background: var(--card-bg); padding: 6px 14px; border-radius: 20px;
            font-size: 11px; font-weight: 800; border: 1px solid var(--border); color: var(--accent);
        }

        /* –ü–æ–∏—Å–∫ (–¢–æ–ª—å–∫–æ –¥–ª—è –º–∞—Ä–∫–µ—Ç–∞) */
        .search-wrapper { position: relative; transition: all 0.3s ease; }
        .search-input {
            width: 100%; background: var(--card-bg); border: 1px solid var(--border);
            padding: 12px 15px 12px 45px; border-radius: 14px; color: white;
            font-size: 15px; outline: none; focus: border-color: var(--accent);
        }
        .search-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); opacity: 0.4; }

        /* ============================================================
           4. –°–¢–†–ê–ù–ò–¶–´
           ============================================================
        */
        .page { display: none; padding: 15px; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }

        /* –ú–∞—Ä–∫–µ—Ç - –°–µ—Ç–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ */
        .items-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .item-card {
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 20px; padding: 12px; position: relative; overflow: hidden;
            transition: transform 0.2s;
        }
        .item-card:active { transform: scale(0.97); }
        .item-img-holder {
            background: rgba(0,0,0,0.2); border-radius: 14px; height: 120px;
            display: flex; align-items: center; justify-content: center; margin-bottom: 12px;
        }
        .item-img { max-width: 90%; max-height: 90%; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5)); }
        .item-name { font-size: 13px; font-weight: 700; height: 38px; overflow: hidden; margin-bottom: 8px; line-height: 1.3; }
        .item-footer { display: flex; justify-content: space-between; align-items: center; }
        .price-tag { display: flex; align-items: center; gap: 4px; font-weight: 900; font-size: 15px; color: var(--accent); }

        .buy-btn {
            width: 100%; padding: 10px; border-radius: 12px; border: none;
            background: var(--accent); color: var(--bg-darker); font-weight: 800;
            font-size: 12px; text-transform: uppercase; margin-top: 10px;
        }

        /* –ì–µ–π–º –•–∞–± (Old Style Blur) */
        .hub-hero {
            height: 350px; border-radius: 25px; margin-top: 10px;
            background: url('https://rare-gallery.com/uploads/posts/301308-csgo-counter-strike-global-offensive-video-game.jpg') center/cover;
            position: relative; overflow: hidden; border: 1px solid var(--border);
        }
        .hub-overlay {
            position: absolute; inset: 0; background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;
        }
        .pulse-text {
            color: var(--accent); font-weight: 900; font-size: 14px;
            letter-spacing: 2px; text-transform: uppercase;
            animation: pulse-dev 2s infinite; margin-bottom: 10px;
        }
        .hub-title { font-size: 32px; font-weight: 900; margin-bottom: 10px; }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .ton-balance-card {
            background: linear-gradient(135deg, #00D2FF 0%, #0088CC 100%);
            border-radius: 22px; padding: 18px; margin-bottom: 20px;
            box-shadow: 0 10px 20px rgba(0, 136, 204, 0.3);
        }
        .ton-bal-header { font-size: 11px; font-weight: 800; text-transform: uppercase; opacity: 0.8; letter-spacing: 1px; }
        .ton-bal-value { font-size: 32px; font-weight: 900; margin: 10px 0; display: flex; align-items: center; gap: 10px; }
        .ton-svg { width: 30px; height: 30px; fill: white; }
        
        .profile-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .p-btn {
            background: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255, 255, 255, 0.2);
            color: white; padding: 10px; border-radius: 12px; font-size: 12px; font-weight: 800;
            backdrop-filter: blur(5px);
        }

        .steam-id-section {
            background: var(--card-bg); border-radius: 20px; padding: 20px;
            border: 1px solid var(--border); margin-bottom: 20px;
        }
        .input-label { font-size: 12px; font-weight: 900; color: var(--accent); margin-bottom: 10px; display: block; }
        .sid-input {
            width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--border);
            padding: 14px; border-radius: 12px; color: white; font-weight: 600; outline: none; margin-bottom: 10px;
        }

        /* –¢–∞–±—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ */
        .tab-nav {
            display: flex; background: var(--card-bg); border-radius: 15px;
            padding: 4px; margin-bottom: 15px; border: 1px solid var(--border);
        }
        .tab-trigger {
            flex: 1; padding: 10px; text-align: center; border-radius: 12px;
            font-size: 12px; font-weight: 800; color: var(--text-gray);
        }
        .tab-trigger.active { background: var(--accent); color: var(--bg-darker); }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px);
            border-top: 1px solid var(--border); display: flex;
            justify-content: space-around; padding: 15px 10px 35px; z-index: 2000;
        }
        .nav-item {
            display: flex; flex-direction: column; align-items: center; gap: 4px;
            color: var(--text-gray); text-decoration: none; font-size: 10px; font-weight: 800;
        }
        .nav-item.active { color: var(--accent); }
        .nav-item svg { width: 24px; height: 24px; }

    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="loader-ring"></div>
        <div class="logo">STAT<span>TRAK</span></div>
    </div>

    <div id="toast-container"></div>

    <header id="app-header">
        <div class="header-top">
            <div class="logo">STAT<span>TRAK</span></div>
            <div id="user-pill" class="user-status">CONNECTING...</div>
        </div>
        <div id="market-search-box" class="search-wrapper">
            <span class="search-icon">üîç</span>
            <input type="text" id="search-input" class="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." oninput="handleSearch()">
        </div>
    </header>

    <main id="page-market" class="page active">
        <div id="market-list" class="items-grid">
            </div>
    </main>

    <section id="page-hub" class="page">
        <div class="hub-hero">
            <div class="hub-overlay">
                <div class="pulse-text">–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
                <h2 class="hub-title">GAME HUB</h2>
                <p style="color: var(--text-gray); font-size: 14px; max-width: 250px;">
                    –ó–¥–µ—Å—å –±—É–¥—É—Ç –∫–µ–π—Å—ã, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã. –ó–∞–≥–ª—è–Ω–∏—Ç–µ –ø–æ–∑–∂–µ!
                </p>
            </div>
        </div>
    </section>

    <section id="page-profile" class="page">
        <div class="ton-balance-card">
            <span class="ton-bal-header">–í–∞—à –±–∞–ª–∞–Ω—Å</span>
            <div class="ton-bal-value">
                <svg class="ton-svg" viewBox="0 0 56 56"><path d="M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56ZM14.5607 15.7513C14.7963 15.3979 15.228 15.2158 15.6318 15.2995L27.6318 17.7995C27.8727 17.8497 28.1273 17.8497 28.3682 17.7995L40.3682 15.2995C40.772 15.2158 41.2037 15.3979 41.4393 15.7513C41.6749 16.1047 41.6738 16.5701 41.4367 16.9234L28.9367 35.4234C28.5146 36.0487 27.4854 36.0487 27.0633 35.4234L14.5633 16.9234C14.3262 16.5701 14.3251 16.1047 14.5607 15.7513Z"/></svg>
                <span id="balance-val">0.00</span>
            </div>
            <div class="profile-actions">
                <button class="p-btn" onclick="showToast('–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ TON –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ')">–ü–û–ü–û–õ–ù–ò–¢–¨</button>
                <button class="p-btn" onclick="showToast('–í—ã–≤–æ–¥ –æ—Ç 2 TON')">–í–´–í–ï–°–¢–ò</button>
            </div>
        </div>

        <div class="steam-id-section">
            <span class="input-label">STEAM ID</span>
            <input type="text" id="sid-field" class="sid-input" placeholder="76561198...">
            <button class="buy-btn" style="background:white; color:black; margin:0;" onclick="saveSid()">–û–ë–ù–û–í–ò–¢–¨ –î–ê–ù–ù–´–ï</button>
        </div>

        <div class="tab-nav">
            <div id="tab-inv" class="tab-trigger active" onclick="switchTab('inv')">–ò–ù–í–ï–ù–¢–ê–†–¨</div>
            <div id="tab-hist" class="tab-trigger" onclick="switchTab('hist')">–ò–°–¢–û–†–ò–Ø</div>
        </div>

        <div id="inventory-status" style="text-align:center; font-size:11px; color:var(--accent); font-weight:800; margin-bottom:10px;"></div>
        <div id="profile-content" class="items-grid">
            </div>
    </section>

    <nav class="bottom-nav">
        <a href="javascript:void(0)" class="nav-item active" onclick="navigate('market', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"/></svg>
            –ú–ê–†–ö–ï–¢
        </a>
        <a href="javascript:void(0)" class="nav-item" onclick="navigate('hub', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="6" width="20" height="12" rx="2"/><path d="M6 12h4M8 10v4M15 13a1 1 0 100-2 1 1 0 000 2z"/></svg>
            –•–ê–ë
        </a>
        <a href="javascript:void(0)" class="nav-item" onclick="navigate('profile', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            –ü–†–û–§–ò–õ–¨
        </a>
    </nav>

    <script>
        /* ============================================================
           5. –°–ö–†–ò–ü–¢–û–í–ê–Ø –õ–û–ì–ò–ö–ê (CORE)
           ============================================================
        */
        const tg = window.Telegram.WebApp;
        const API_URL = 'https://stattrakmrkt.onrender.com';
        let marketData = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        window.onload = async () => {
            tg.ready();
            tg.expand();
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (tg.initDataUnsafe?.user) {
                document.getElementById('user-pill').innerText = tg.initDataUnsafe.user.first_name.toUpperCase();
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π SID
            const savedSid = localStorage.getItem('cs2_sid64');
            if (savedSid) document.getElementById('sid-field').value = savedSid;

            // –ì—Ä—É–∑–∏–º –º–∞—Ä–∫–µ—Ç
            await fetchMarket();

            // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–ª–æ–∞–¥–µ—Ä
            setTimeout(() => {
                document.getElementById('loading-screen').style.opacity = '0';
                setTimeout(() => document.getElementById('loading-screen').style.display = 'none', 500);
            }, 1000);
        };

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        function navigate(pageId, element) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            document.getElementById('page-' + pageId).classList.add('active');
            element.classList.add('active');

            // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–∏—Å–∫ –µ—Å–ª–∏ –Ω–µ –º–∞—Ä–∫–µ—Ç
            document.getElementById('market-search-box').style.display = (pageId === 'market') ? 'block' : 'none';

            if (pageId === 'profile') fetchInventory();
            
            tg.HapticFeedback.impactOccurred('light');
        }

        // –†–∞–±–æ—Ç–∞ —Å –º–∞—Ä–∫–µ—Ç–æ–º
        async function fetchMarket() {
            try {
                const res = await fetch(`${API_URL}/api/market`);
                marketData = await res.json();
                renderMarket(marketData);
            } catch (e) {
                console.error("Market error", e);
                document.getElementById('market-list').innerHTML = '<p style="grid-column:1/-1;text-align:center;opacity:0.5;padding:50px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä–∫–µ—Ç–∞</p>';
            }
        }

        function renderMarket(items) {
            const list = document.getElementById('market-list');
            list.innerHTML = items.map(item => {
                // –¢–ò–¢–ê–ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê –ö–ê–†–¢–ò–ù–û–ö
                let imgUrl = item.image || item.icon_url;
                if (!imgUrl || imgUrl === 'undefined') {
                    imgUrl = 'https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVdgYpw23d9dfHldogjSA1BW7mD8v_k_W4RS04_IiH6NBX8j66F8WLY';
                } else if (!imgUrl.includes('http')) {
                    imgUrl = 'https://community.cloudflare.steamstatic.com/economy/image/' + imgUrl;
                }

                return `
                <div class="item-card">
                    <div class="item-img-holder">
                        <img src="${imgUrl}" class="item-img" onerror="this.src='https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVdgYpw23d9dfHldogjSA1BW7mD8v_k_W4RS04_IiH6NBX8j66F8WLY'">
                    </div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-footer">
                        <div class="price-tag">
                            <svg style="width:14px;height:14px;fill:var(--accent)" viewBox="0 0 56 56"><path d="M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56ZM14.5607 15.7513C14.7963 15.3979 15.228 15.2158 15.6318 15.2995L27.6318 17.7995C27.8727 17.8497 28.1273 17.8497 28.3682 17.7995L40.3682 15.2995C40.772 15.2158 41.2037 15.3979 41.4393 15.7513C41.6749 16.1047 41.6738 16.5701 41.4367 16.9234L28.9367 35.4234C28.5146 36.0487 27.4854 36.0487 27.0633 35.4234L14.5633 16.9234C14.3262 16.5701 14.3251 16.1047 14.5607 15.7513Z"/></svg>
                            ${item.price}
                        </div>
                    </div>
                    <button class="buy-btn" onclick="handleBuy('${item.id}')">–ö–£–ü–ò–¢–¨</button>
                </div>`;
            }).join('');
        }

        // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (Working Logic)
        async function fetchInventory() {
            const sid = document.getElementById('sid-field').value.trim();
            const container = document.getElementById('profile-content');
            const status = document.getElementById('inventory-status');

            if (!sid) {
                container.innerHTML = '<p style="grid-column:1/-1;text-align:center;padding:40px;opacity:0.4;">–í–≤–µ–¥–∏—Ç–µ Steam ID</p>';
                return;
            }

            status.innerText = "–û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–•...";
            
            try {
                const res = await fetch(`${API_URL}/api/inventory/${sid}`);
                const data = await res.json();
                
                // –ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
                const items = data.items || data.assets || (Array.isArray(data) ? data : []);

                if (!items || items.length === 0) {
                    status.innerText = "–ò–ù–í–ï–ù–¢–ê–†–¨ –ü–£–°–¢ –ò–õ–ò –°–ö–†–´–¢";
                    container.innerHTML = '';
                    return;
                }

                status.innerText = "–ù–ê–ô–î–ï–ù–û –ü–†–ï–î–ú–ï–¢–û–í: " + items.length;
                container.innerHTML = items.map(i => {
                    let img = i.icon_url || i.image;
                    if (img && !img.includes('http')) img = 'https://community.cloudflare.steamstatic.com/economy/image/' + img;
                    return `
                    <div class="item-card">
                        <div class="item-img-holder"><img src="${img}" class="item-img"></div>
                        <div class="item-name">${i.name || i.market_hash_name}</div>
                        <button class="buy-btn" style="background:white; color:black;">–ü–†–û–î–ê–¢–¨</button>
                    </div>`;
                }).join('');
            } catch (e) {
                status.innerText = "–û–®–ò–ë–ö–ê –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò";
            }
        }

        function handleSearch() {
            const q = document.getElementById('search-input').value.toLowerCase();
            const filtered = marketData.filter(item => item.name.toLowerCase().includes(q));
            renderMarket(filtered);
        }

        function saveSid() {
            const sid = document.getElementById('sid-field').value.trim();
            if (sid) {
                localStorage.setItem('cs2_sid64', sid);
                showToast("Steam ID –æ–±–Ω–æ–≤–ª–µ–Ω!");
                fetchInventory();
                tg.HapticFeedback.notificationOccurred('success');
            }
        }

        function switchTab(t) {
            document.getElementById('tab-inv').classList.toggle('active', t === 'inv');
            document.getElementById('tab-hist').classList.toggle('active', t === 'hist');
            
            if (t === 'inv') {
                document.getElementById('profile-content').style.display = 'grid';
                fetchInventory();
            } else {
                document.getElementById('profile-content').style.display = 'none';
                document.getElementById('inventory-status').innerText = "–ò–°–¢–û–†–ò–Ø –ü–£–°–¢–ê";
            }
        }

        function showToast(msg) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `<span>‚ö°</span> ${msg}`;
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function handleBuy(id) {
            tg.showConfirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å —ç—Ç–æ—Ç —Å–∫–∏–Ω?");
            tg.HapticFeedback.impactOccurred('medium');
        }

    </script>
</body>
</html>
